https://i.postimg.cc/kX4Q1nkP/lik.jpg
https://i.postimg.cc/23RCZjWL/first.jpg
https://i.postimg.cc/B6kZcBFz/04.jpg

{% extends 'base/base.html' %}
{% block main %}
{% load static %}
<main>
  <!-- Container START -->
  <div class="container">
    <div class="row g-4">

      <!-- Sidenav START -->
      {% include 'left.html' %}
      <!-- Sidenav END -->

      <!-- Main content START -->

      <div class="col-md-10 col-lg-6 vstack gap-4" style="max-height: 750px; overflow: auto;">
        <!-- new room -->
        <div class="d-flex gap-2 mb-n3">
          <div class="position-relative">
            <div
              class="card border border-2 border-dashed h-150px px-4 px-sm-5 shadow-none d-flex align-items-center justify-content-center text-center">
              <div> <a class=" btn btn-light rounded-circle icon-md" href="#!">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-plus-lg" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                      d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2" />
                  </svg></a>

                <h6 class="mt-2 mb-0 small">Create new Room</h6>
              </div>
            </div>
          </div>
        </div>
        <div>

        </div>

        <!-- Card feed item START -->
        {% for room in rooms %}
        <div class="card">
          <!-- Card header START -->
          <div class="card-header border-0 pb-0">
            <div class="d-flex align-items-center justify-content-between">
              <div class="d-flex align-items-center">
                <!-- Avatar -->
                <div class="avatar avatar-story me-2">
                  <a href="#!"> <img class="avatar-img rounded-circle" style="width: 50px; height: 50px;"
                    src="https://i.postimg.cc/B6kZcBFz/04.jpg" alt="04"> </a>
                </div>

                <!-- Info -->
                <div class="row">

                  <div class="col col-lg-4">
                    <div class="nav nav-divider">
                      <h6 class="nav-item card-title mb-0 mr-1 "> <a href="/userinfo/{{room.host.id}}"> {{room.host}} </a></h6>
                      <span class="nav-item "> 2hr</span>
                    </div>
                    <p class="mb-0 small">{{room.topic}}</p>
                  </div>
                  <div class="col">
                    <h4>{{ room.name }}</h4>
                  </div>
                </div>
              </div>
              <!-- Card feed action dropdown START -->
              <div class="dropdown">
                <a href="#" class="text-secondary btn btn-secondary-soft-hover py-1 px-2" id="cardFeedAction"
                  data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="bi bi-three-dots"></i>
                </a>
                <!-- Card feed action dropdown menu -->
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="cardFeedAction">
                  <li><a class="dropdown-item" href="#"> <i class="bi bi-bookmark fa-fw pe-2"></i>Save post</a></li>
                  <li><a class="dropdown-item" href="#"> <i class="bi bi-person-x fa-fw pe-2"></i>Unfollow lori
                      ferguson </a></li>
                  <li><a class="dropdown-item" href="#"> <i class="bi bi-x-circle fa-fw pe-2"></i>Hide post</a></li>
                  <li><a class="dropdown-item" href="#"> <i class="bi bi-slash-circle fa-fw pe-2"></i>Block</a></li>
                  <li>
                    <hr class="dropdown-divider">
                  </li>
                  <li><a class="dropdown-item" href="#"> <i class="bi bi-flag fa-fw pe-2"></i>Report post</a></li>
                </ul>
              </div>
              <!-- Card feed action dropdown END -->
            </div>
          </div>
          <!-- Card header END -->
          <!-- Card body START -->
          <div class="card-body">
            <p>{{room.description}}</p>
            <!-- Card img -->
            <img class="card-img fit" style="width: 100px; height: 100px;" src="https://i.postimg.cc/23RCZjWL/first.jpg" alt="Post">
            <!-- Feed react START -->
            <ul class="nav nav-stack py-3 small">
              <li class="nav-item">
                <a class="nav-link " href="/add_like/{{room.id}}/">
                  <i class="bi bi-hand-thumbs-up-fill pe-1"></i>Liked ({{ room.roomlike_set.count }})</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#!"> <i class="bi bi-chat-fill pe-1"></i>Comments 
                  ({{ room.roomcomment_set.count }})</a>
              </li>
              <!-- Card share action START -->
              <li class="nav-item dropdown ms-sm-auto">
                <a class="nav-link mb-0" href="#" id="cardShareAction" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="bi bi-reply-fill flip-horizontal ps-1"></i>Share ({{room.roomshare_set.count }})
                </a>
                <!-- Card share action dropdown menu -->
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="cardShareAction">
                  <li><a class="dropdown-item" href="/add_share/{{room.id}}/"> <i class="bi bi-envelope fa-fw pe-2"></i>Send via Direct
                      Message</a></li>
                  <li><a class="dropdown-item" href="/add_share/{{room.id}}/"> <i class="bi bi-bookmark-check fa-fw pe-2"></i>Bookmark </a>
                  </li>
                  <li><a class="dropdown-item" href="/add_share/{{room.id}}/"> <i class="bi bi-link fa-fw pe-2"></i>Copy link to post</a>
                  </li>
                  <li><a class="dropdown-item" href="/add_share/{{room.id}}/"> <i class="bi bi-share fa-fw pe-2"></i>Share post via â€¦</a>
                  </li>
                  <li>
                    <hr class="dropdown-divider">
                  </li>
                  <li><a class="dropdown-item" href="/add_share/{{room.id}}/"> <i class="bi bi-pencil-square fa-fw pe-2"></i>Share to News
                      Feed</a></li>
                </ul>
              </li>
              <!-- Card share action END -->
            </ul>
            <!-- Feed react END -->

            <!-- Add comment -->
            <div class="d-flex mb-3">
              <!-- Avatar -->
              <div class="avatar avatar-xs me-2">
                <a href="#!"> <img class="avatar-img rounded-circle" src="assets/images/avatar/12.jpg" alt=""> </a>
              </div>
              <!-- Comment box  -->
              <form method="post" action="/add_comment" class="nav nav-item w-100 position-relative">
                {% csrf_token %}
                <textarea name="comment" data-autoresize class="form-control pe-5 bg-light" rows="1"
                  placeholder="Add a comment..."></textarea>

                <input hidden type="number" name="room_id" value="{{room.id}}" >
                <button class="nav-link bg-transparent px-3 position-absolute top-50 end-0 translate-middle-y border-0"
                  type="submit">
                  <i class="bi bi-send-fill"> </i>
                </button>
              </form>
            </div>
            <!-- Comment wrap START -->
            {% if room.roomcomment_set %}
            <div class="comments-section">

              {% for comment in room.roomcomment_set.all|slice:":2" %}
              <div class="d-flex">
                <!-- Avatar -->
                <div class="avatar avatar-xs">
                  <a href="#!"><img class="avatar-img rounded-circle" src="assets/images/avatar/05.jpg" alt=""></a>
                </div>
                <div class="ms-2">
                  <!-- Comment by -->
                  <div class="bg-light rounded-start-top-0 p-3 rounded">
                    <div class="d-flex justify-content-between">
                      <h6 class="mb-1"> <a href="#!"> {{ comment.user.username }} </a></h6>
                      <small class="ms-2">{{comment.created|timesince}} ago</small>
                    </div>
                    <p class="small mb-0">{{ comment.message }}</p>
                  </div>
                  <!-- Comment react -->
                  <ul class="nav nav-divider py-2 small">
                    <li class="nav-item">
                      <a class="nav-link" href="/add_comment_like/{{comment.id}}"> Like ({{ comment.commentlike_set.count }})</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" data-bs-toggle="collapse" href="#multiCollapseExample1{{comment.id}}" role="button" aria-expanded="false" aria-controls="multiCollapseExample1">Reply</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" data-bs-toggle="collapse" href="#multiCollapseExample2{{comment.id}}" role="button" aria-expanded="false" aria-controls="multiCollapseExample2">View {{comment.commentreply_set.count}} replies</a>
                    </li>
                  </ul>
<div class="nothing">
  <div class="row">
    <div class="col-6">
      <div class="collapse multi-collapse" id="multiCollapseExample1{{comment.id}}">
        
          <form method="post" action="/add_comment_reply" class="nav nav-item w-100 position-relative">
            {% csrf_token %}
            <input name="message" data-autoresize class="form-control pe-5 bg-light"
              placeholder="Reply..."/>

            <input hidden type="text" name="comment_id" value="{{comment.id}}" >
            <button class="nav-link bg-transparent px-3 position-absolute top-50 end-0 translate-middle-y border-0"
              type="submit">
              <i class="bi bi-send-fill"> </i>
            </button>
          </form>
        
      </div>
    </div>
    <div class="col">
      <div class="collapse multi-collapse" id="multiCollapseExample2{{comment.id}}">
        <div class="card card-body">
          <ul class="comment-item-nested list-unstyled">
            <!-- Comment item nested START -->  
          {% for reply in comment.commentreply_set.all|slice:":2"%}
            <!-- Comment item START -->
            <li class="comment-item">
              <div class="d-flex">
                <!-- Avatar -->
                <div class="avatar avatar-xs">
                  <a href="#!"><img class="avatar-img rounded-circle" src="assets/images/avatar/06.jpg"
                      alt=""></a>
                </div>
                <!-- Comment by -->
                <div >
                  <div class="bg-light p-3 rounded">
                    <div class="d-flex justify-content-between">
                      <h6 class="mb-1"> <a href="#!"> {{reply.user.username}} </a> </h6>
                      <small class="ms-2">{{ reply.created|timesince }} ago</small>
                    </div>
                    <p class="small mb-0"> {{reply.message}}</p>
                  </div>
                  <!-- Comment react -->
                  <!-- <ul class="nav nav-divider py-2 small">
                    <li class="nav-item">
                      <a class="nav-link" href="#!"> Like (5)</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="#!"> Reply</a>
                    </li>
                  </ul> -->
                </div>
              </div>
            </li>
            {% endfor %}
            <!-- Comment item END -->
          </ul>
         
        </div>
      </div>
    </div>
  </div>
</div>

                </div>
              </div>
              
              {% endfor %}
            </div>
            {% endif %}


          </div>
          <!-- Card body END -->
          <!-- Card footer START -->
          <div class="card-footer border-0 pt-0">
            <!-- Load more comments -->
            <a href="#!" role="button"
              class="btn btn-link btn-link-loader btn-sm text-secondary d-flex align-items-center"
              data-bs-toggle="button" aria-pressed="true">
              <div class="spinner-dots me-2">
                <span class="spinner-dot"></span>
                <span class="spinner-dot"></span>
                <span class="spinner-dot"></span>
              </div>
              Load more comments
            </a>
          </div>

          <!-- Card footer END -->
        </div>
        {% endfor %}
        <!-- Card feed item END -->



        <hr>
        {% for room in rooms %}
        <div class="room-card">
          <h2>{{ room.name }}</h2>
          <p>{{ room.description }}</p>
          <p>Host: {{ room.host.username }}</p>
          <p>Topic: {{ room.topic.name }}</p>
          <p>Likes: {{ room.roomlike_set.count }}</p>
          <p>Comments: {{ room.roomcomment_set.count }}</p>
          <p>Shares: {{ room.roomshare_set.count }}</p>
          <button >Like</button>
          <button >Comment</button>
          <button >Share</button>

          <h3>Comments:</h3>
          {% for comment in room.roomcomment_set.all %}
          <div class="comment-card">
            <p>{{ comment.user.username }}: {{ comment.message }}</p>
            <p>Likes: {{ comment.commentlike_set.count }}</p>
            <p>Replies: {{ comment.commentreply_set.count }}</p>
            <button >Like</button>
            <button >Reply</button>
          </div>
          {% endfor %}
        </div>
        {% endfor %}

        {% if rooms.has_other_pages %}
        <div class="pagination">
          <span class="step-links">
            {% if rooms.has_previous %}
            <a href="?page=1">&laquo; First</a>
            <a href="?page={{ rooms.previous_page_number }}">Previous</a>
            {% endif %}

            <span class="current">
              Page {{ rooms.number }} of {{ rooms.paginator.num_pages }}
            </span>

            {% if rooms.has_next %}
            <a href="?page={{ rooms.next_page_number }}">Next</a>
            <a href="?page={{ rooms.paginator.num_pages }}">Last &raquo;</a>
            {% endif %}
          </span>
        </div>
        {% endif %}






        <!-- Load more button START -->
        <a href="#!" role="button" class="btn btn-loader btn-primary-soft" data-bs-toggle="button" aria-pressed="true">
          <span class="load-text"> Loading more </span>
          <div class="load-icon">
            <div class="spinner-grow spinner-grow-sm" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
        </a>
        <!-- Load more button END -->

      </div>
      <!-- Main content END -->

      <!-- Right sidebar START -->
      {% include 'right.html' %}
      <!-- Right sidebar END -->

    </div> <!-- Row END -->
  </div>
  <!-- Container END -->

</main>
{% endblock %}